# DDNS配置文件示例 - 混合使用DNSPod和Cloudflare
# 本示例展示如何同时使用两个DNS提供商管理不同的域名

# 间隔时间（秒）
sleep_secs = 120
# 每隔几次强制从DNS provider获取最新的记录
force_get_record_interval = 5

# 默认使用DNSPod
default_provider = "dnspod"

# 默认DNSPod配置
default_dnspod_token = "your_dnspod_token_id,your_dnspod_token_secret"

# 默认Cloudflare配置
default_cloudflare_token = "your_cloudflare_api_token"
default_cloudflare_zone_id = "your_cloudflare_zone_id"

# 默认IP查询URL
default_ip_url = "https://api.ipify.org"

# 默认hook指令
default_hook_command = "echo \"IP changed to $NEW_IP for $DOMAIN\" >> /var/log/ddns.log"

# ========== DNSPod 管理的域名 ==========

# 使用默认DNSPod配置
[[domains]]
domain = "home.example.com"
# provider = "dnspod" 可省略，因为default_provider是dnspod

# 使用自定义DNSPod token
[[domains]]
domain = "blog.mysite.org"
provider = "dnspod"
dnspod_token = "custom_dnspod_id,custom_dnspod_secret"
hook_command = "ssh root@blog-server.com \"systemctl restart nginx\""

# DNSPod 多级子域名
[[domains]]
domain = "api.v2.myservice.com"
provider = "dnspod"
dnspod_token = "api_token_id,api_token_secret"

# ========== Cloudflare 管理的域名 ==========

# 使用默认Cloudflare配置
[[domains]]
domain = "www.cloudflare-site.com"
provider = "cloudflare"

# 使用自定义Cloudflare配置
[[domains]]
domain = "api.cloudflare-site.com"
provider = "cloudflare"
cloudflare_token = "custom_cloudflare_api_token"
cloudflare_zone_id = "custom_cloudflare_zone_id"
ip_url = "https://ipv4.icanhazip.com"
hook_command = "curl -X POST https://webhook.site/notify -d \"domain=$DOMAIN&new_ip=$NEW_IP\""

# Cloudflare 带自定义hook
[[domains]]
domain = "cdn.cloudflare-site.com"
provider = "cloudflare"
hook_command = "ssh root@cache-server.com \"systemctl restart varnish\""

# ========== 混合场景示例 ==========

# 不同provider管理同一个组织的不同子域名
[[domains]]
domain = "legacy.example.com"
provider = "dnspod"
dnspod_token = "legacy_token_id,legacy_token_secret"

[[domains]]
domain = "modern.example.com"
provider = "cloudflare"
cloudflare_token = "modern_cf_token"
cloudflare_zone_id = "modern_cf_zone_id"
